"use strict";!function(){function e(e){for(var t=0;t<$(".link a").length;t++){var n=$(".link a")[t];n.getAttribute("href")=="#"+e.$$path?n.parentElement.classList.add("active"):(n.parentElement.classList.remove("active"),n.parentElement.classList.remove("active"))}}function t(e){for(var t={},n=e[0].date.getUTCFullYear(),r=[],a=0;a<e.length;a++){var l=e[a];l.date.getFullYear()==n?r.push(l):(t[n]=r,n=l.date.getUTCFullYear(),r=[],r.push(l))}return t[n]=r,t}function n(e,t){if(!e)return[[],[]];if(e[0].date>=t)return[[],e];var n;for(n=1;n<e.length&&!(e[n].date>=t);n++);return n==e.length?[e,[]]:[e.slice(0,n),e.slice(n)]}angular.module("myApp",["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"templates/main.htm",controller:"TimelineController"}).when("/program",{templateUrl:"templates/program.htm",controller:"ProgramController"}).when("/join",{templateUrl:"templates/join.htm",controller:"PageController"}).when("/people",{templateUrl:"templates/people.htm",controller:"PageController"}).otherwise({redirectTo:"/"})}]).controller("PageController",["$scope","$route","$location",function(t,n,r){e(r)}]).controller("TimelineController",["$scope","$route","$location","$http",function(t,n,r,a){e(r),a({method:"GET",url:"../admin/timeline/timeline.json"}).then(function(e){for(var n=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sept","Okt","Nov","Dez"],r=[],a=0;a<e.data.length;a++){var l=e.data[a],o=new Date(l.date),i={};i.date=o,i.day=o.getUTCDate(),i.month=n[o.getUTCMonth()],i.title=l.title,i.text=l.text,i.galeryLink=l.galeryLink,i.thumbnail="/admin/timeline/thumbnails/"+l.thumbnail,r.push(i)}t.events=r.sort(function(e,t){return console.log(e),e.date<t.date?1:e.date>t.date?-1:0})},function(e){t.error=!0})}]).controller("ProgramController",["$scope","$route","$location","$http",function(r,a,l,o){e(l),o({method:"GET",url:"../admin/program/program.json"}).then(function(e){for(var a={highlight:"bg-success",compulsory:"bg-primary",public:"bg-info",private:"bg-danger",none:""},l={highlight:"Highlight",compulsory:"Obligatorisch",public:"Öffentlich",private:"Privat",none:"Mitglieder"},o=0;o<e.data.length;o++){var i=e.data[o];i.date=new Date(i.date),i.cat=l[i.tag],i.tag=a[i.tag]}var g=e.data.sort(function(e,t){return e.date<t.date?-1:e.date>t.date?1:0}),m=new Date,u=new Date(moment(m).format("YYYY-MM-DD"));console.log(u);var c=t(g),p=Object.keys(c),s=p.indexOf(u.getUTCFullYear().toString()),h={},d=n(c[u.getUTCFullYear()],u);d[1].length>0&&(h[u.getUTCFullYear()]=d[1]);for(var o=s+1;o<p.length;o++)h[p[o]]=c[p[o]];var f=!1;r.pastElements=function(){f=!f,f?(r.program=c,r.link="Vergangene Elemente ausblenden"):(r.program=h,r.link="Vergangene Elemente anzeigen")},r.link="Vergangene Elemente anzeigen",r.program=h},function(e){r.error=e.statusText,r.link="",r.program={}})}])}();