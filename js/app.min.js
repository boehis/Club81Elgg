"use strict";!function(){function e(e){for(var t=0;t<$(".link a").length;t++){var r=$(".link a")[t];r.getAttribute("href")=="#"+e.$$path?r.parentElement.classList.add("active"):(r.parentElement.classList.remove("active"),r.parentElement.classList.remove("active"))}}function t(e){for(var t={},r=e[0].date.getUTCFullYear(),n=[],a=0;a<e.length;a++){var l=e[a];l.date.getFullYear()==r?n.push(l):(t[r]=n,r=l.date.getUTCFullYear(),n=[],n.push(l))}return t[r]=n,t}function r(e,t){if(!e)return[[],[]];if(e[0].date>=t)return[[],e];var r;for(r=1;r<e.length&&!(e[r].date>=t);r++);return r==e.length?[e,[]]:[e.slice(0,r),e.slice(r)]}angular.module("myApp",["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"templates/main.htm",controller:"TimelineController"}).when("/program",{templateUrl:"templates/program.htm",controller:"ProgramController"}).when("/join",{templateUrl:"templates/join.htm",controller:"PageController"}).when("/people",{templateUrl:"templates/people.htm",controller:"PageController"}).otherwise({redirectTo:"/"})}]).controller("PageController",["$scope","$route","$location",function(t,r,n){e(n)}]).controller("TimelineController",["$scope","$route","$location","$http",function(t,r,n,a){e(n),a({method:"GET",url:"../admin/timeline/timeline.json"}).then(function(e){var r=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sept","Okt","Nov","Dez"];t.events=[];for(var n=0;n<e.data.length;n++){var a=e.data[n],l=new Date(a.date),o={};o.day=l.getUTCDate(),o.month=r[l.getUTCMonth()],o.title=a.title,o.text=a.text,o.hasGalery=""!=a.galeryLink&&""!=a.thumbnail,o.galeryLink=a.galeryLink,o.thumbnail=a.thumbnail,t.events.push(o)}},function(e){t.error=!0})}]).controller("ProgramController",["$scope","$route","$location","$http",function(n,a,l,o){e(l),o({method:"GET",url:"../admin/program.json"}).then(function(e){for(var a={highlight:"bg-success",compulsory:"bg-primary",public:"bg-info",private:"bg-danger",none:""},l={highlight:"Highlight",compulsory:"Obligatorisch",public:"Öffentlich",private:"Privat",none:"Mitglieder"},o=0;o<e.data.length;o++){var i=e.data[o];i.date=new Date(i.date),i.cat=l[i.tag],i.tag=a[i.tag]}var g=e.data.sort(function(e,t){return e.date<t.date?-1:e.date>t.date?1:0}),u=new Date,m=new Date(moment(u).format("YYYY-MM-DD"));console.log(m);var c=t(g),h=Object.keys(c),p=h.indexOf(m.getUTCFullYear().toString()),s={},d=r(c[m.getUTCFullYear()],m);d[1].length>0&&(s[m.getUTCFullYear()]=d[1]);for(var o=p+1;o<h.length;o++)s[h[o]]=c[h[o]];var f=!1;n.pastElements=function(){f=!f,f?(n.program=c,n.link="Vergangene Elemente ausblenden"):(n.program=s,n.link="Vergangene Elemente anzeigen")},n.link="Vergangene Elemente anzeigen",n.program=s},function(e){n.error=e.statusText,n.link="",n.program={}})}])}();