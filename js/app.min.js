"use strict";!function(){function e(e){for(var t=0;t<$(".link a").length;t++){var n=$(".link a")[t];n.getAttribute("href")=="#"+e.$$path?n.parentElement.classList.add("active"):(n.parentElement.classList.remove("active"),n.parentElement.classList.remove("active"))}}function t(e){for(var t={},n=e[0].date.getUTCFullYear(),r=[],a=0;a<e.length;a++){var l=e[a];l.date.getFullYear()==n?r.push(l):(t[n]=r,n=l.date.getUTCFullYear(),r=[],r.push(l))}return t[n]=r,t}function n(e,t){if(!e)return[[],[]];if(e[0].date>=t)return[[],e];var n;for(n=1;n<e.length&&!(e[n].date>=t);n++);return n==e.length?[e,[]]:[e.slice(0,n),e.slice(n)]}angular.module("myApp",["ngRoute"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"templates/main.htm",controller:"TimelineController"}).when("/program",{templateUrl:"templates/program.htm",controller:"ProgramController"}).when("/join",{templateUrl:"templates/join.htm",controller:"PageController"}).when("/people",{templateUrl:"templates/people.htm",controller:"PageController"}).otherwise({redirectTo:"/"})}]).controller("PageController",["$scope","$route","$location",function(t,n,r){e(r)}]).controller("TimelineController",["$scope","$route","$location","$http",function(t,n,r,a){e(r),a({method:"GET",url:"../admin/timeline.json"}).then(function(e){var n=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sept","Okt","Nov","Dez"];t.events=[];for(var r=0;r<e.data.length;r++){var l=e.data[r],o=new Date(l.date),i={};i.day=o.getUTCDate(),i.month=n[o.getUTCMonth()],i.title=l.title,i.text="Loading...",i.hasGalery=""!=l.galeryLink&&""!=l.thumbnail,i.galeryLink=l.galeryLink,i.thumbnail=l.thumbnail,function(e){a({method:"GET",url:"../admin/timeline/"+l.text}).then(function(t){e.text=t.data},function(t){e.text=t.statusText})}(i),t.events.push(i)}},function(e){t.error=!0})}]).controller("ProgramController",["$scope","$route","$location","$http",function(r,a,l,o){e(l),o({method:"GET",url:"../admin/program.json"}).then(function(e){for(var a={highlight:"bg-success",compulsory:"bg-primary",public:"bg-info",private:"bg-danger",none:""},l={highlight:"Highlight",compulsory:"Obligatorisch",public:"Öffentlich",private:"Privat",none:"Mitglieder"},o=0;o<e.data.length;o++){var i=e.data[o];i.date=new Date(i.date),i.cat=l[i.tag],i.tag=a[i.tag]}var g=e.data.sort(function(e,t){return e.date<t.date?-1:e.date>t.date?1:0}),u=new Date,m=new Date(moment(u).format("YYYY-MM-DD"));console.log(m);var c=t(g),h=Object.keys(c),s=h.indexOf(m.getUTCFullYear().toString()),p={},d=n(c[m.getUTCFullYear()],m);d[1].length>0&&(p[m.getUTCFullYear()]=d[1]);for(var o=s+1;o<h.length;o++)p[h[o]]=c[h[o]];var f=!1;r.pastElements=function(){f=!f,f?(r.program=c,r.link="Vergangene Elemente ausblenden"):(r.program=p,r.link="Vergangene Elemente anzeigen")},r.link="Vergangene Elemente anzeigen",r.program=p},function(e){r.error=e.statusText,r.link="",r.program={}})}])}();